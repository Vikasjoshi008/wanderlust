<% layout("/layouts/boilerplate.ejs") %>

<div id="filters" class="d-none d-md-flex">
  <div class="filter">
    <div><i class="fa-brands fa-gripfire"></i></div>
    <p>Trending</p>
  </div>
  <div class="filter">
    <div><i class="fa-solid fa-bed"></i></div>
    <p>Rooms</p>
  </div>
  <div class="filter">
    <div><i class="fa-solid fa-mountain-city"></i></div>
    <p>Iconic cities</p>
  </div>
  <div class="filter">
    <div><i class="fa-solid fa-mountain"></i></div>
    <p>Mountains</p>
  </div>
  <div class="filter">
    <div><i class="fa-brands fa-fort-awesome"></i></div>
    <p>Castles</p>
  </div>
  <div class="filter">
    <div><i class="fa-solid fa-person-swimming"></i></div>
    <p>Amazing pools</p>
  </div>
  <div class="filter">
    <div><i class="fa-solid fa-tents"></i></div>
    <p>Camping</p>
  </div>
  <div class="filter">
    <div><i class="fa-solid fa-cow"></i></div>
    <p>Farms</p>
  </div>
  <div class="filter">
    <div><i class="fa-solid fa-snowflake"></i></div>
    <p>Arctic</p>
  </div>
  <div class="filter">
    <div><i class="fa-solid fa-igloo"></i></div>
    <p>Domes</p>
  </div>
  <div class="filter">
    <div><i class="fa-solid fa-ship"></i></div>
    <p>Boats</p>
  </div>

  <div class="tax-toggle">
    <div class="form-check-reverse form-switch">
    <input 
    class="form-check-input" 
    type="checkbox" 
    role="switch" 
    id="switchCheckDefault">
    <label class="form-check-label" 
    for="switchCheckDefault">Display total after taxes</label>
  </div>
  </div>
</div>
<!-- Mobile: horizontally scrollable rows with 8 listings each -->
<% function chunk(arr, size) { let out = []; for(let i=0; i<arr.length; i+=size) out.push(arr.slice(i,i+size)); return out; } %>
<% chunk(listings, 8).forEach(function(row) { %>
  <div class="listing-scroll-row d-md-none mb-3">
    <% row.forEach(function(listing) { %>
      <a href="/listings/<%= listing._id %>" class="listing-link me-5">
        <div class="card listing-card">
          <img src="<%=listing.image.url%>" class="card-img-top" alt="listing_image">
          <div class="card-img-overlay"></div>
          <div class="card-body">
            <p class="card-text">
              <b><%= listing.title %></b>
              &#8377;<%= listing.price.toLocaleString('en-IN') %> for 2 nights
              <i class="tax-info">&nbsp; +18% GST</i>
            </p>
          </div>
        </div>
      </a>
    <% }); %>
  </div>
<% }); %>
<!-- Desktop/laptop: horizontal scrollable rows with 8 listings each -->
<% function chunk(arr, size) { let out = []; for(let i=0; i<arr.length; i+=size) out.push(arr.slice(i,i+size)); return out; } %>
<% chunk(listings, 8).forEach(function(row) { %>
  <div class="listing-desktop-row d-none d-md-flex mb-4">
    <% row.forEach(function(listing) { %>
      <a href="/listings/<%= listing._id %>" class="listing-link-desktop">
        <div class="card listing-card-desktop">
          <img src="<%=listing.image.url%>" class="card-img-top" alt="listing_image">
          <div class="card-img-overlay"></div>
          <div class="card-body">
            <p class="card-text">
              <b><%= listing.title %></b>
              &#8377;<%= listing.price.toLocaleString("en-IN") %> for 2 nights
              <i class="tax-info">&nbsp; +18% GST</i>
            </p>
          </div>
        </div>
      </a>
    <% }); %>
  </div>
<% }); %>
